{% extends 'base.html' %}

{% block content %}
    <!-- Email Display -->
    <div class="mb-3">
        <label class="form-label">Email: <span id="user-email">Not set</span></label>
    </div>

    <!-- URL Input -->
    <div class="mb-3">
        <label for="url-input" class="form-label">Webpage URL</label>
        <div class="input-group">
            <input type="text" class="form-control" id="url-input" placeholder="https://example.com">
            <input type="text" class="form-control" id="css-selector" placeholder="Optional CSS selector (e.g., .messages)">
            <button class="btn btn-primary" onclick="addUrl()">Add</button>
        </div>
    </div>

    <!-- URL List -->
    <div class="mb-3">
        <label class="form-label">Monitored URLs</label>
        <ul class="list-group" id="url-list"></ul>
    </div>

    <!-- Sound Upload -->
    <div class="mb-3">
        <label for="sound-input" class="form-label">Notification Sound (MP3/MP4/WAV)</label>
        <input type="file" class="form-control" id="sound-input" accept=".mp3,.mp4,.wav">
    </div>

    <!-- Ring Count -->
    <div class="mb-3">
        <label for="ring-count" class="form-label">Ring Times (1-5)</label>
        <select class="form-select" id="ring-count">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>

    <!-- Start Monitoring -->
    <button class="btn btn-primary w-100 mb-3" onclick="startMonitoring()">Start Monitoring</button>

    <!-- Status -->
    <div>Status: <span id="status">Idle</span></div>

    <!-- Email Prompt Modal -->
    <div class="modal fade" id="emailModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Setup</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <label for="email-input" class="form-label">Enter your email</label>
                    <input type="email" class="form-control" id="email-input">
                    <label for="password-input" class="form-label mt-2">Enter your password</label>
                    <input type="password" class="form-control" id="password-input">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="submitEmail()">Submit</button>
                </div>
            </div>
        </div>
    </div>
    <div>
        <h2>Welcome to WebNotify, {{ user.email }}!</h2>
        <p><a href="{% url 'manage_urls' %}">Manage URLs</a></p>
        <p><a href="{% url 'upload_sound' %}">Upload Sound</a></p>
        <p><a href="{% url 'set_settings' %}">Set Ring Count</a></p>
        <p><a href="{% url 'start_monitoring' %}">Start Monitoring</a></p>
        <p><a href="{% url 'get_notifications' %}">View Notifications</a></p>
        <p><a href="{% url 'logout' %}">Logout</a></p>  <!-- Updated -->

    </div>


{% endblock %}